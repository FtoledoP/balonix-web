<div class="team-selector-container" *ngIf="{ teams: teams$ | async, profile: userProfile$ | async, activeTeam: activeTeam$ | async } as data">
  <div class="team-selector-label">Equipo Activo</div>
  <ng-container *ngIf="data.teams">
    <div class="active-team-display" *ngIf="data.teams.length > 0 && data.activeTeam; else noTeams" (click)="openTeamSelector()">
      <div class="team-logo-circle">
        <!-- Usamos las iniciales del equipo como logo provisional -->
        <span>{{ getTeamInitials(data.activeTeam.name) }}</span>
      </div>
      <div class="team-name">
        {{ data.activeTeam.name }}
      </div>
    </div>
    
    <ng-template #noTeams>
      <div class="no-teams-container">
        <p class="no-teams-message">No tienes equipos</p>
        <button class="create-team-btn" (click)="createTeam()">Crear equipo</button>
      </div>
    </ng-template>
  </ng-container>
  
  <!-- Modal de selecciÃ³n de equipos -->
  <app-team-selector-modal 
    [teams]="data.teams || []" 
    [activeTeam]="data.activeTeam" 
    [isVisible]="showModal"
    (teamSelected)="selectTeam($event)"
    (closeModal)="closeModal()"
    (createTeamRequest)="createTeam()">
  </app-team-selector-modal>
</div>
